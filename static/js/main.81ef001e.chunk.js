(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{15:function(t,e,n){t.exports={ModalBackdrop:"Modal_ModalBackdrop__3iFAG",ModalContent:"Modal_ModalContent__2V-8g"}},33:function(t,e,n){},34:function(t,e,n){},40:function(t,e,n){},67:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),r=n(9),c=n.n(r),i=(n(33),n(27)),s=n(12),l=n(2),u=n(3),d=n(5),h=n(4),p=(n(34),n(11)),f=n(81),j=n(1),b=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(l.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={todos:t.props.todos},t.handleChange=function(e){var n=e.target,o=n.name,a=n.value,r=n.type,c=n.checked;t.setState(Object(p.a)({},o,"checkbox"===r?c:a)),console.log(t.state.checked)},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.todos,o=e.onDeleteTodo,a=n.length,r=n.filter((function(t){return t.completed})).length;return Object(j.jsxs)("div",{className:"TodoListWrapper",children:["TodoList:",Object(j.jsxs)("p",{children:["total : ",a," | \u2705 \u2192 ",r]}),Object(j.jsx)("ol",{children:n.map((function(e){var n=e.id,a=e.text,r=e.completed;return Object(j.jsxs)("li",{children:[Object(j.jsx)("input",{type:"checkbox",name:"completed",id:"",checked:r,onChange:function(){return t.props.toggleCompleted(n)}}),r?"\u2705":"\u26d4"," ",a,"\u2003",Object(j.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){return o(n)},children:"\u274c Delete"})]},n)}))})]})}}]),n}(o.Component);b.defaultProps={};var g=b,v=function(t){var e=t.filter,n=t.onChange;return Object(j.jsxs)("label",{children:["\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0438\u043c\u0435\u043d\u0438",Object(j.jsx)("input",{type:"text",value:e,onChange:n})]})};v.defaultProps={};var O=v,m=(n(40),"junior"),x="middle",y="senior",C={login:"",password:"",email:"",agreed:!1,level:null},S=(o.Component,function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(l.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={text:""},t.handleChange=function(e){t.setState({text:e.currentTarget.value})},t.handleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.text),t.setState({text:""})},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state.text;return Object(j.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(j.jsxs)("label",{children:["Add new todo",Object(j.jsx)("input",{type:"text",name:"text",value:t,placeholder:"Add new todo...",onChange:this.handleChange})]}),Object(j.jsx)("button",{type:"submit",children:"Add"})]})}}]),n}(o.PureComponent));S.defaultProps={};var k=S,w=n(15),M=n.n(w),A=document.querySelector("#modal-root"),T=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(l.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).handleKeyDown=function(e){"Escape"===e.code&&t.props.onClose()},t.handleBackdropClick=function(e){e.currentTarget===e.target&&t.props.onClose()},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(r.createPortal)(Object(j.jsx)("div",{className:M.a.ModalBackdrop,onClick:this.handleBackdropClick,children:Object(j.jsx)("div",{className:M.a.ModalContent,children:this.props.children})}),A)}}]),n}(o.PureComponent);T.defaultProps={};var L=T,D=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(l.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={url:"",title:""},t.handleClick=function(e){console.log("handleClick"),console.dir(e.target),t.setState({title:e.target.textContent,url:e.target.attributes.href})},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this,e=this.props.articles;return Object(j.jsx)("div",{className:"ArticleListWrapper",children:Object(j.jsx)("ul",{children:e.map((function(e){var n=e.objectID,o=e.url,a=e.title;return Object(j.jsx)("li",{onClick:t.handleClick,children:Object(j.jsx)("a",{href:o,target:"_blank",rel:"noreferrer noopener",children:a||"Sorry, no title \ud83d\ude25"})},n)}))})})}}]),n}(o.PureComponent);D.defaultProps={};var P=D,N=n(10),q=n.n(N),W={fetchArticlesWithQuery:function(t){return q.a.get("https://hn.algolia.com/api/v1/search?query=".concat(t)).then((function(t){return t.data.hits}))}},_={fetchTodos:function(){return q.a.get("http://localhost:3000/todos").then((function(t){return t.data}))},addTodo:function(t){return q.a.post("http://localhost:3000/todos",t).then((function(t){return t.data}))},deleteTodo:function(t){return q.a.delete("http://localhost:3000/todos/".concat(t))},updateTodo:function(t,e){return q.a.patch("http://localhost:3000/todos/".concat(t),e).then((function(t){return t.data}))}},B=n(26),E=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(l.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={query:""},t.handleChange=function(e){t.setState({query:e.target.value})},t.handleSubmit=function(e){e.preventDefault(),console.log(e.target.value),t.setState({query:e.target.value}),t.props.onSubmit(t.state.query),t.setState({query:""})},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.props.onSubmit,e=this.state.query;return Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("label",{children:["\u0424\u0438\u043b\u044c\u0442\u0440 \u043f\u043e \u0438\u043c\u0435\u043d\u0438",Object(j.jsx)("input",{type:"text",value:e,onChange:this.handleChange})]}),Object(j.jsx)("button",{type:"submit",children:"\ud83d\udd0d"})]})}}]),n}(o.PureComponent);E.defaultProps={};var I=E,K=n(25),Q=n.n(K),F=function(t){Object(d.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(l.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))).state={articles:[],todos:[],filter:"",showModal:!1,isLoading:!1,error:null,searching:""},t.deleteTodo=function(e){_.deleteTodo(e).then((function(){t.setState((function(t){return{todos:t.todos.filter((function(t){return t.id!==e}))}}))}))},t.onChange=function(e){console.log("filter",e.target.value),t.setState({filter:e.target.value})},t.handleSubmit=function(e){console.log("data",e),t.setState(Object(s.a)({},e))},t.addNewTodo=function(e){var n={id:Q.a.generate(),text:e,completed:!1};_.addTodo(n).then((function(e){t.setState((function(t){var n=t.todos;return{todos:[e].concat(Object(i.a)(n))}}))})).catch((function(e){return t.setState({error:e})})).finally((function(){return t.setState({isLoading:!1})})),t.toggleModal()},t.toggleCompleted=function(e){var n=t.state.todos.find((function(t){return t.id===e})).completed;_.updateTodo(e,{completed:!n}).then((function(e){t.setState((function(t){return{todos:t.todos.map((function(t){return t.id===e.id?e:t}))}}))}))},t.toggleModal=function(){t.setState((function(t){return{showModal:!t.showModal}}))},t.articlesSearching=function(e){t.setState({searching:e})},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;this.setState({isLoading:!0});this.state.searching;W.fetchArticlesWithQuery(this.state.searching).then((function(e){return t.setState({articles:e})})).catch((function(e){return t.setState({error:e})})).finally((function(){return t.setState({isLoading:!1})})),_.fetchTodos().then((function(e){return t.setState({todos:e})})).catch((function(e){return t.setState({error:e})})).finally((function(){return t.setState({isLoading:!1})}))}},{key:"componentDidUpdate",value:function(t,e){var n=this;e.searching!==this.state.searching&&W.fetchArticlesWithQuery(this.state.searching).then((function(t){return n.setState({articles:t})})).catch((function(t){return n.setState({error:t})})).finally((function(){return n.setState({isLoading:!1})}))}},{key:"render",value:function(){var t=this.state,e=t.todos,n=(t.onChange,t.filter),o=t.showModal,a=(t.agreed,t.articles),r=t.isLoading,c=t.error,i=t.searching,s=e.filter((function(t){return t.text.toLowerCase().includes(n.toLowerCase())}));return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{className:"App",children:["API",Object(j.jsx)(I,{searching:i,onSubmit:this.articlesSearching}),c&&Object(j.jsxs)("p",{children:["Whoops, something went wrong: ",c]}),r&&Object(j.jsx)(B.a,{}),a.length>0&&Object(j.jsx)(P,{articles:a})]}),Object(j.jsxs)("div",{className:"App",children:[o&&Object(j.jsxs)(L,{onClose:this.toggleModal,children:[Object(j.jsx)("button",{onClick:this.toggleModal,children:"X"}),Object(j.jsx)(k,{onSubmit:this.addNewTodo})]}),Object(j.jsx)("button",{className:"button",onClick:this.toggleModal,children:o?"Close modal":"Add new todo"}),Object(j.jsx)("header",{className:"App-header"}),Object(j.jsx)(O,{filter:this.state.filter,onChange:this.onChange}),Object(j.jsx)(g,{todos:s,onDeleteTodo:this.deleteTodo,toggleCompleted:this.toggleCompleted})]})]})}}]),n}(o.Component);c.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(F,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.81ef001e.chunk.js.map